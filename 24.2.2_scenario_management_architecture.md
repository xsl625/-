# 24.2.2 åœºæ™¯ç®¡ç†åŠŸèƒ½æ¶æ„å›¾

## æŠ€æœ¯æ¶æ„æ¦‚è¿°
åœºæ™¯ç®¡ç†åŠŸèƒ½é‡‡ç”¨äº‹ä»¶é©±åŠ¨æ¶æ„(EDA)å’Œé¢†åŸŸé©±åŠ¨è®¾è®¡(DDD)ï¼Œä¸ºæ•°å­—äººäº§å“æä¾›ä¼ä¸šçº§çš„åœºæ™¯å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†èƒ½åŠ›ã€‚ç³»ç»Ÿæ”¯æŒå¯è§†åŒ–åœºæ™¯ç¼–æ’ã€æ™ºèƒ½å¯¹è¯ç®¡ç†ã€å®æ—¶æ€§èƒ½ç›‘æ§å’Œè‡ªåŠ¨åŒ–ä¼˜åŒ–ã€‚

### æ ¸å¿ƒä»·å€¼
- **å¯è§†åŒ–ç¼–æ’**: æ‹–æ‹½å¼åœºæ™¯è®¾è®¡å™¨ï¼Œä½ä»£ç å¼€å‘
- **æ™ºèƒ½å¯¹è¯**: NLPé©±åŠ¨çš„å¤šè½®å¯¹è¯ç®¡ç†
- **å®æ—¶æ‰§è¡Œ**: æ¯«ç§’çº§åœºæ™¯å“åº”å’ŒçŠ¶æ€åŒæ­¥
- **æ•°æ®é©±åŠ¨**: åŸºäºç”¨æˆ·è¡Œä¸ºçš„åœºæ™¯ä¼˜åŒ–

## æ¨¡å—åŒ–åˆ†å±‚æ¶æ„å›¾

```mermaid
graph TB
    subgraph "å±•ç°å±‚ Presentation Layer"
        A[ğŸ¨ å¯è§†åŒ–åœºæ™¯è®¾è®¡å™¨<br/>Visual Scenario Designer<br/><small>Vue 3 + Fabric.js + WebRTC</small>]
        B[ğŸ“Š å®æ—¶ç›‘æ§ä»ªè¡¨æ¿<br/>Real-time Monitoring Dashboard<br/><small>React + D3.js + Socket.io</small>]
        C[ğŸ“ˆ åœºæ™¯åˆ†æå·¥ä½œå°<br/>Scenario Analytics Workbench<br/><small>Angular + ECharts + RxJS</small>]
        D[ğŸ“± ç§»åŠ¨ç«¯ç®¡ç†åº”ç”¨<br/>Mobile Management App<br/><small>Flutter + GetX + Dio</small>]
    end
    
    subgraph "åº”ç”¨å±‚ Application Layer"
        E[ğŸ­ åœºæ™¯ç¼–æ’åº”ç”¨æœåŠ¡<br/>Scenario Orchestration Service<br/><small>Spring Boot + Camunda + Redis</small>]
        F[ğŸ”„ ç”Ÿå‘½å‘¨æœŸç®¡ç†æœåŠ¡<br/>Lifecycle Management Service<br/><small>Spring Boot + State Machine</small>]
        G[âš¡ å®æ—¶æ‰§è¡Œå¼•æ“æœåŠ¡<br/>Real-time Execution Service<br/><small>Netty + Akka + Hazelcast</small>]
        H[ğŸ“Š æ™ºèƒ½åˆ†ææœåŠ¡<br/>Intelligence Analytics Service<br/><small>Spark + Flink + ClickHouse</small>]
        I[ğŸ¤– å¯¹è¯ç®¡ç†æœåŠ¡<br/>Dialog Management Service<br/><small>Rasa + FastAPI + PostgreSQL</small>]
    end
    
    subgraph "é¢†åŸŸå±‚ Domain Layer"
        J[ğŸ¬ åœºæ™¯ç¼–æ’é¢†åŸŸ<br/>Scenario Orchestration Domain<br/><small>Workflow Engine + BPMN 2.0</small>]
        K[ğŸ’¬ å¯¹è¯ç®¡ç†é¢†åŸŸ<br/>Dialog Management Domain<br/><small>NLU + Dialog State Tracking</small>]
        L[ğŸ§  æ™ºèƒ½å†³ç­–é¢†åŸŸ<br/>Intelligent Decision Domain<br/><small>Rule Engine + ML Models</small>]
        M[ğŸ”„ çŠ¶æ€ç®¡ç†é¢†åŸŸ<br/>State Management Domain<br/><small>Event Sourcing + CQRS</small>]
        N[ğŸ“ˆ æ•°æ®åˆ†æé¢†åŸŸ<br/>Data Analytics Domain<br/><small>Stream Processing + OLAP</small>]
    end
    
    subgraph "åŸºç¡€è®¾æ–½å±‚ Infrastructure Layer"
        M[åœºæ™¯å¼•æ“æ¨¡å—<br/>Scenario Engine Module]
        N[AIæœåŠ¡é›†æˆæ¨¡å—<br/>AI Service Integration Module]
        O[æ•°æ®æŒä¹…åŒ–æ¨¡å—<br/>Data Persistence Module]
        P[æ¶ˆæ¯é€šä¿¡æ¨¡å—<br/>Message Communication Module]
    end
    
    subgraph "æ•°æ®å­˜å‚¨ Data Storage"
        Q[(åœºæ™¯æ•°æ®åº“<br/>Scenario Database)]
        R[(å¯¹è¯æ•°æ®åº“<br/>Dialog Database)]
        S[(ç”¨æˆ·è¡Œä¸ºæ•°æ®åº“<br/>User Behavior Database)]
        T[(çŸ¥è¯†å›¾è°±<br/>Knowledge Graph)]
    end
    
    subgraph "å¤–éƒ¨ç³»ç»Ÿ External Systems"
        U[AIæ¨¡å‹æœåŠ¡<br/>AI Model Service]
        V[è¯­éŸ³å¤„ç†æœåŠ¡<br/>Speech Processing Service]
        W[å›¾åƒè¯†åˆ«æœåŠ¡<br/>Image Recognition Service]
        X[ç¬¬ä¸‰æ–¹é›†æˆæœåŠ¡<br/>Third-party Integration Service]
    end
    
    %% å±•ç°å±‚åˆ°åº”ç”¨å±‚
    A --> E
    A --> F
    B --> G
    B --> H
    C --> H
    D --> E
    D --> G
    
    %% åº”ç”¨å±‚åˆ°é¢†åŸŸå±‚
    E --> I
    F --> I
    F --> L
    G --> J
    G --> K
    H --> L
    
    %% é¢†åŸŸå±‚åˆ°åŸºç¡€è®¾æ–½å±‚
    I --> M
    J --> M
    J --> N
    K --> M
    K --> N
    L --> O
    L --> P
    
    %% åŸºç¡€è®¾æ–½å±‚åˆ°æ•°æ®å­˜å‚¨
    M --> Q
    N --> R
    O --> Q
    O --> R
    O --> S
    O --> T
    P --> S
    
    %% åŸºç¡€è®¾æ–½å±‚åˆ°å¤–éƒ¨ç³»ç»Ÿ
    N --> U
    N --> V
    N --> W
    N --> X
    
    %% æ ·å¼å®šä¹‰
    style A fill:#E3F2FD
    style B fill:#E3F2FD
    style C fill:#E3F2FD
    style D fill:#E3F2FD
    style E fill:#F3E5F5
    style F fill:#F3E5F5
    style G fill:#F3E5F5
    style H fill:#F3E5F5
    style I fill:#E8F5E8
    style J fill:#E8F5E8
    style K fill:#E8F5E8
    style L fill:#E8F5E8
    style M fill:#FFF3E0
    style N fill:#FFF3E0
    style O fill:#FFF3E0
    style P fill:#FFF3E0
    style Q fill:#FCE4EC
    style R fill:#FCE4EC
    style S fill:#FCE4EC
    style T fill:#FCE4EC
    style U fill:#F1F8E9
    style V fill:#F1F8E9
    style W fill:#F1F8E9
    style X fill:#F1F8E9
```

## æ ¸å¿ƒç»„ä»¶è¯´æ˜

### 1. åœºæ™¯ç¼–æ’æœåŠ¡ (Scenario Orchestration)
- **åŠŸèƒ½**: åœºæ™¯æµç¨‹çš„è®¾è®¡å’Œç¼–æ’
- **ç‰¹æ€§**:
  - å¯è§†åŒ–åœºæ™¯ç¼–æ’ç•Œé¢
  - æ¡ä»¶åˆ†æ”¯å’Œå¾ªç¯æ§åˆ¶
  - å¹¶å‘åœºæ™¯å¤„ç†èƒ½åŠ›
  - åœºæ™¯æ¨¡ç‰ˆå’Œå¤ç”¨æœºåˆ¶

### 2. åœºæ™¯ç”Ÿå‘½å‘¨æœŸç®¡ç† (Lifecycle Management)
- **åŠŸèƒ½**: ç®¡ç†åœºæ™¯ä»åˆ›å»ºåˆ°é”€æ¯çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ
- **ç‰¹æ€§**:
  - åœºæ™¯ç‰ˆæœ¬ç®¡ç†
  - å‘å¸ƒå’Œå›æ»šæœºåˆ¶
  - A/Bæµ‹è¯•æ”¯æŒ
  - åœºæ™¯æ€§èƒ½ç›‘æ§

### 3. å¯¹è¯å¼•æ“ (Dialog Engine)
- **åŠŸèƒ½**: å¤„ç†æ•°å­—äººçš„å¯¹è¯é€»è¾‘å’Œè‡ªç„¶è¯­è¨€ç†è§£
- **ç‰¹æ€§**:
  - å¤šè½®å¯¹è¯ç®¡ç†
  - æ„å›¾è¯†åˆ«å’Œå®ä½“æŠ½å–
  - ä¸Šä¸‹æ–‡è®°å¿†æœºåˆ¶
  - ä¸ªæ€§åŒ–å¯¹è¯é£æ ¼

### 4. å†³ç­–å¼•æ“ (Decision Engine)
- **åŠŸèƒ½**: åŸºäºè§„åˆ™å’Œæœºå™¨å­¦ä¹ çš„æ™ºèƒ½å†³ç­–
- **ç‰¹æ€§**:
  - è§„åˆ™å¼•æ“é›†æˆ
  - æœºå™¨å­¦ä¹ æ¨¡å‹æ¨ç†
  - å®æ—¶å†³ç­–èƒ½åŠ›
  - å†³ç­–ç»“æœè¿½è¸ª

## æŠ€æœ¯ç‰¹ç‚¹

### å®æ—¶æ€§
- ä½å»¶è¿Ÿåœºæ™¯åˆ‡æ¢
- å®æ—¶çŠ¶æ€åŒæ­¥
- æµå¼æ•°æ®å¤„ç†

### æ™ºèƒ½åŒ–
- AIé©±åŠ¨çš„åœºæ™¯æ¨è
- è‡ªé€‚åº”åœºæ™¯ä¼˜åŒ–
- æ™ºèƒ½å¼‚å¸¸å¤„ç†

### å¯æ‰©å±•æ€§
- æ’ä»¶åŒ–åœºæ™¯ç»„ä»¶
- å¼€æ”¾å¼APIæ¥å£
- å¤šäº‘éƒ¨ç½²æ”¯æŒ

## åœºæ™¯ç±»å‹æ”¯æŒ

### 1. å®¢æœåœºæ™¯
- é—®é¢˜å’¨è¯¢å¤„ç†
- æŠ•è¯‰å»ºè®®å¤„ç†
- ä¸šåŠ¡åŠç†å¼•å¯¼

### 2. è¥é”€åœºæ™¯
- äº§å“æ¨è
- æ´»åŠ¨å®£ä¼ 
- ç”¨æˆ·ç”»åƒåˆ†æ

### 3. æ•™è‚²åœºæ™¯
- çŸ¥è¯†é—®ç­”
- å­¦ä¹ å¼•å¯¼
- è¿›åº¦è·Ÿè¸ª

### 4. å¨±ä¹åœºæ™¯
- äº’åŠ¨æ¸¸æˆ
- å†…å®¹æ¨è
- ç¤¾äº¤äº’åŠ¨

## æ•°æ®æµç¨‹

1. **åœºæ™¯åˆ›å»ºæµç¨‹**
   - åœºæ™¯è®¾è®¡ â†’ é…ç½®éªŒè¯ â†’ åœºæ™¯ç¼–è¯‘ â†’ æµ‹è¯•éªŒè¯ â†’ å‘å¸ƒä¸Šçº¿

2. **åœºæ™¯æ‰§è¡Œæµç¨‹**
   - ç”¨æˆ·è§¦å‘ â†’ åœºæ™¯è·¯ç”± â†’ å¼•æ“å¤„ç† â†’ çŠ¶æ€æ›´æ–° â†’ ç»“æœè¿”å›

3. **åœºæ™¯ä¼˜åŒ–æµç¨‹**
   - æ•°æ®æ”¶é›† â†’ æ€§èƒ½åˆ†æ â†’ ç­–ç•¥è°ƒæ•´ â†’ A/Bæµ‹è¯• â†’ æ•ˆæœè¯„ä¼°